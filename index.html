<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Vanguard Boost Application</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Font imports -->
  <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Loading animation bar -->
  <div class="loading-animation"></div>

  <div class="container">
    <!-- Logo container for Vanguard Boost brand asset -->
    <div class="logo-container">
      <!-- This SVG can be replaced with your actual logo -->
      <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="40" stroke="#c4ff00" stroke-width="4" fill="none" />
        <path d="M30 50 L45 65 L70 35" stroke="#c4ff00" stroke-width="4" fill="none" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </div>

    <div class="header">
      <h1>Vanguard Boost Application</h1>
      <p>Join our elite team of boosters</p>
    </div>

    <div class="progress-container">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="step active" id="step1">
        1
        <div class="step-label">Contact</div>
      </div>
      <div class="step" id="step2">
        2
        <div class="step-label">Personal</div>
      </div>
    </div>

    <!-- Form starts here -->
    <form
      id="applicationForm"
      name="applicationForm"
      method="POST"
      data-netlify="true"
      netlify-honeypot="bot-field"
      action="/submit-form"
    >
      <!-- Hidden fields for Netlify -->
      <input type="hidden" name="form-name" value="applicationForm" />
      <input type="hidden" name="bot-field" />
      <!-- Hidden Application ID -->
      <input type="hidden" name="applicationId" id="applicationId" value="">

      <!-- Page 1 -->
      <div class="page active" id="page1">
        <!-- Contact Information Section -->
        <div class="section">
          <h2 class="section-title">Contact Information</h2>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label required">Email</label>
              <input type="email" class="form-input" id="email" name="email" required />
            </div>
            <div class="form-group">
              <label class="form-label required">Discord Handle</label>
              <input type="text" class="form-input" id="discord" name="discord" required />
            </div>
            <div class="form-group">
              <label class="form-label required">Bungie ID (including #XXXX)</label>
              <input type="text" class="form-input" id="nickname" name="nickname" required placeholder="Example: Username#1234" />
              <small class="help-text">
                Important: Enter your complete Bungie ID including the "#" and numbers (e.g., "Username#1234")
              </small>
            </div>
            <div class="form-group">
              <label class="form-label">Referred By</label>
              <input type="text" class="form-input" id="referredBy" name="referredBy" />
            </div>
          </div>
        </div>

        <!-- Service Options Section -->
        <div class="section">
          <h2 class="section-title">Service Options</h2>
          <div class="form-group">
            <label class="form-label required">What games do you provide services for?</label>
            <select class="form-select" id="game" name="game" required>
              <option value="" disabled selected>Select</option>
              <option value="Destiny 2">Destiny 2</option>
              <option value="Other">Other</option>
            </select>
            <div id="otherGameInput" style="display: none; margin-top: 10px;">
              <input type="text" class="form-input" id="otherGame" name="otherGame" placeholder="Specify other game" />
            </div>
          </div>
          <div class="form-group">
            <label class="form-label required">I can dedicate</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="availability" class="radio-input" value="Less than 4hrs/day" required />
                <span class="radio-label">Less than 4hrs/day</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="availability" class="radio-input" value="Less than 7hrs/day" />
                <span class="radio-label">Less than 7hrs/day</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="availability" class="radio-input" value="Full time" />
                <span class="radio-label">Full time</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="availability" class="radio-input" value="Other" />
                <span class="radio-label">Other</span>
              </label>
            </div>
            <div id="otherAvailabilityInput" style="display: none; margin-top: 10px;">
              <input type="text" class="form-input" id="otherAvailability" name="otherAvailability" placeholder="Specify availability" />
            </div>
          </div>
        </div>

        <!-- Regions and Services Section -->
        <div class="section">
          <h2 class="section-title">Regions and Services</h2>
          <div class="form-group">
            <label class="form-label required">Select country/region</label>
            <select class="form-select" id="country" name="country" required>
              <option value="" disabled selected>Select</option>
              <option value="United States">United States</option>
              <option value="Canada">Canada</option>
              <option value="United Kingdom">United Kingdom</option>
              <option value="Australia">Australia</option>
              <option value="Germany">Germany</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label required">SELECT ALL APPLICABLE SERVICES</label>
            <div class="checkbox-group">
              <label class="checkbox-option">
                <input type="checkbox" name="services" class="checkbox-input" value="Piloted" />
                <span class="checkbox-label">PILOTED
                  <span class="tooltip" title="Piloted: A professional pre-runs the game/match on your behalf.">?</span>
                </span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="services" class="checkbox-input" value="Self-play" />
                <span class="checkbox-label">SELF-PLAY
                  <span class="tooltip" title="Self-play: You play the game yourself.">?</span>
                </span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="services" class="checkbox-input" value="Coaching" />
                <span class="checkbox-label">COACHING</span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="services" class="checkbox-input" value="PvP" />
                <span class="checkbox-label">PVP</span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="services" class="checkbox-input" value="PvE" />
                <span class="checkbox-label">PVE</span>
              </label>
            </div>
            <div class="error-message" id="servicesError">Please select at least one service</div>
          </div>
        </div>

        <!-- Platforms Section -->
        <div class="section">
          <h2 class="section-title">Platforms</h2>
          <div class="form-group">
            <label class="form-label required">SPECIFY THE PLATFORMS YOU PROVIDE SERVICES ON</label>
            <div class="checkbox-group">
              <label class="checkbox-option">
                <input type="checkbox" name="platforms" class="checkbox-input" value="Xbox" />
                <span class="checkbox-label">XBOX</span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="platforms" class="checkbox-input" value="PC" />
                <span class="checkbox-label">PC</span>
              </label>
              <label class="checkbox-option">
                <input type="checkbox" name="platforms" class="checkbox-input" value="PlayStation" />
                <span class="checkbox-label">PLAYSTATION</span>
              </label>
            </div>
            <div class="error-message" id="platformsError">Please select at least one platform</div>
          </div>
        </div>

        <!-- Gaming Experience Section -->
        <div class="section">
          <h2 class="section-title">Gaming Experience</h2>
          <div class="form-group">
            <label class="form-label required">
              Destiny Tracker: Link to game profiles like Raider.io, Tracker.gg, etc.
            </label>
            <input type="text" class="form-input" id="destinyTrackerUrl" name="destinyTrackerUrl" required />
          </div>
          <div class="form-group">
            <label class="form-label required">
              Explain your gaming experience, achievements, and any previous marketplace work
            </label>
            <textarea class="form-textarea" id="experience" name="experience" required></textarea>
          </div>
        </div>

        <!-- Verification Section -->
        <div class="section">
          <h2 class="section-title">Verification</h2>
          <div class="form-group">
            <label class="form-label required">
              Upload screenshots to verify your gaming profile and completed orders
            </label>
            <div class="file-upload">
              <label for="fileInput" class="file-btn">Add Files</label>
              <input type="file" id="fileInput" name="files[]" accept="image/*" multiple />
            </div>
            <div class="file-list" id="fileList"></div>
          </div>
        </div>

        <!-- VPN & Streaming Section -->
        <div class="section">
          <h2 class="section-title">VPN & Streaming</h2>
          <div class="form-group">
            <label class="form-label required">VPN Requirement</label>
            <div class="checkbox-group">
              <label class="checkbox-option">
                <input
                  type="checkbox"
                  class="checkbox-input"
                  name="vpnAcknowledgement"
                  id="vpnAcknowledgement"
                  required
                  value="true"
                />
                <span class="checkbox-label">
                  I acknowledge that I will be required to use a VPN.
                </span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label required">Are you able to stream your services?</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="streaming" class="radio-input" value="Yes" required />
                <span class="radio-label">Yes</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="streaming" class="radio-input" value="No" />
                <span class="radio-label">No</span>
              </label>
            </div>
          </div>
        </div>

        <div class="navigation">
          <div></div>
          <button type="button" class="nav-button next" id="nextButton">
            CONTINUE
          </button>
        </div>
      </div>
      <!-- End of Page 1 -->

      <!-- Page 2 -->
      <div class="page" id="page2">
        <!-- Personal Details Section -->
        <div class="section">
          <h2 class="section-title">Personal Details</h2>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label required">First Name</label>
              <input type="text" class="form-input" id="firstName" name="firstName" required />
            </div>
            <div class="form-group">
              <label class="form-label required">Last Name</label>
              <input type="text" class="form-input" id="lastName" name="lastName" required />
            </div>
          </div>
          <div class="form-group">
            <label class="form-label required">Are you 18+?</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="age" class="radio-input" value="Yes" required />
                <span class="radio-label">Yes</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="age" class="radio-input" value="No" />
                <span class="radio-label">No</span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">How did you hear about us?</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="hearAbout" class="radio-input" value="Facebook" />
                <span class="radio-label">Facebook</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="hearAbout" class="radio-input" value="Instagram" />
                <span class="radio-label">Instagram</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="hearAbout" class="radio-input" value="Discord" />
                <span class="radio-label">Discord</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="hearAbout" class="radio-input" value="Colleague/Friend" />
                <span class="radio-label">A colleague/friend</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="hearAbout" class="radio-input" value="Other" />
                <span class="radio-label">Other</span>
              </label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">Tell us something about yourself</label>
            <textarea class="form-textarea" id="aboutYourself" name="aboutYourself" placeholder="Add here..."></textarea>
          </div>
        </div>

        <!-- Join Discord Section -->
        <div class="section">
          <h2 class="section-title">JOIN VANGUARD BOOST DISCORD</h2>
          <div class="section-special">
            <p>
              YOU ARE INVITED TO JOIN THE RECRUITING DISCORD SERVER.
            </p>
            <div style="display: flex; align-items: center; margin-top: 15px;">
              <label class="checkbox-option" style="margin: 0; position: relative;">
                <input type="checkbox" class="checkbox-input" id="joinedDiscord" name="joinedDiscord" />
                <span class="checkbox-label">I'VE JOINED THE SERVER.</span>
                <span class="discord-cue">(Click JOIN NOW first)</span>
              </label>
              <a href="https://discord.gg/Bz2cqz6GRm" class="submit-button" target="_blank" id="joinNowButton">
                JOIN NOW
              </a>
            </div>
          </div>
        </div>

        <!-- Message to Confirm Section -->
        <div class="section">
          <h2 class="section-title">MESSAGE TO CONFIRM</h2>
          <div class="section-special">
            <p>
              SEND A FRIEND REQUEST TO @VANGUARDRECRUITER ON DISCORD AND NOTIFY THEM OF YOUR SUBMITTED APPLICATION.
            </p>
            <p class="help-text" style="margin-bottom: 15px;">
              EXAMPLE: "HELLO! I'VE JUST SENT AN APPLICATION TO BECOME A BOOSTER."
            </p>
            <a href="https://discord.gg/Bz2cqz6GRm" class="back-button" target="_blank">
              GO TO DISCORD
            </a>
          </div>
        </div>

        <!-- Secure Verification Section -->
        <div class="section">
          <h2 class="section-title">SECURE VERIFICATION</h2>
          <div class="section-special">
            <label class="checkbox-option">
              <input type="checkbox" class="checkbox-input" id="verification" name="verification" required />
              <span class="checkbox-label"><strong>I AGREE</strong> TO THE THIRD-PARTY VERIFICATION PROCESS</span>
            </label>
            <label class="checkbox-option" style="margin-top: 15px;">
              <input type="checkbox" class="checkbox-input" id="fraudAgreement" name="fraudAgreement" required />
              <span class="checkbox-label">ATTEMPTS AT VERIFICATION FRAUD WILL RESULT IN APPLICATION REJECTION! <strong>I UNDERSTAND AND AGREE.</strong></span>
            </label>
          </div>
        </div>

        <!-- Submit Section -->
        <div class="section">
          <div class="text-center">
            <button type="submit" class="submit-button" id="submitButton" disabled>
              SUBMIT APPLICATION
            </button>
            <div class="checkbox-group" style="margin-top: 25px;">
              <label class="checkbox-option">
                <input type="checkbox" class="checkbox-input" id="submissionAgreement" name="submissionAgreement" required />
                <span class="checkbox-label">
                  CLICKING THE "SUBMIT" BUTTON SENDS THE APPLICATION FOR CONSIDERATION, WHICH MAY TAKE UP TO 3 DAYS OR LONGER. IF APPROVED, YOU WILL BE CONTACTED VIA DISCORD. <strong>I'VE READ THIS INFORMATION THOROUGHLY.</strong>
                </span>
              </label>
              <label class="checkbox-option" style="margin-top: 20px;">
                <input type="checkbox" class="checkbox-input" id="missingInfoAgreement" name="missingInfoAgreement" required />
                <span class="checkbox-label">
                  IF ANY FORM FIELDS ARE FILLED OUT INCORRECTLY OR MISSING, THE APPLICATION MAY BE DECLINED WITHOUT FURTHER EXPLANATION. <strong>I UNDERSTAND.</strong>
                </span>
              </label>
              <!-- Netlify reCAPTCHA widget -->
              <div data-netlify-recaptcha="true"></div>
            </div>
          </div>
        </div>

        <div class="navigation">
          <button type="button" class="back-button" id="backButton">BACK</button>
          <div></div>
        </div>
      </div>
      <!-- End of Page 2 -->
    </form>
  </div>

  <!-- ... existing script ... -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      console.log("DOM loaded - initializing form");

      // Generate a unique Application ID
      const applicationId = "APP" + Date.now();
      document.getElementById("applicationId").value = applicationId;

      const applicationForm = document.getElementById("applicationForm");

      // Page elements and navigation
      const page1 = document.getElementById("page1");
      const page2 = document.getElementById("page2");
      const step1 = document.getElementById("step1");
      const step2 = document.getElementById("step2");
      const progressFill = document.getElementById("progressFill");
      const nextButton = document.getElementById("nextButton");
      const backButton = document.getElementById("backButton");
      const submitButton = document.getElementById("submitButton");

      // Initialize submit button as disabled
      if (submitButton) {
        submitButton.disabled = true;
      }

      // "JOIN NOW" button & Discord checkbox logic
      const joinedDiscordCheckbox = document.getElementById("joinedDiscord");
      const joinNowButton = document.getElementById("joinNowButton");
      if (joinedDiscordCheckbox && joinNowButton) {
        joinedDiscordCheckbox.disabled = true; // initially disabled
        joinNowButton.addEventListener("click", function(e) {
          joinedDiscordCheckbox.disabled = false;
        });
      }

      // Game selection dropdown
      const gameSelect = document.getElementById("game");
      const otherGameInput = document.getElementById("otherGameInput");
      if (gameSelect && otherGameInput) {
        gameSelect.addEventListener("change", function () {
          otherGameInput.style.display = (this.value === "Other") ? "block" : "none";
        });
      }

      // Availability radio buttons
      const availabilityRadios = document.querySelectorAll('input[name="availability"]');
      const otherAvailabilityInput = document.getElementById("otherAvailabilityInput");
      availabilityRadios.forEach(function (radio) {
        radio.addEventListener("change", function () {
          otherAvailabilityInput.style.display = (this.value === "Other") ? "block" : "none";
        });
      });

      // File upload functionality
      const fileInput = document.getElementById("fileInput");
      const fileList = document.getElementById("fileList");
      const MAX_FILES = 2;
      let uploadedFiles = [];
      if (fileInput) {
        fileInput.addEventListener("change", function () {
          if (this.files.length > 0) {
            if (uploadedFiles.length >= MAX_FILES) {
              alert("Maximum of " + MAX_FILES + " files allowed");
              return;
            }
            const file = this.files[0];
            const fileObj = { id: Date.now(), name: file.name, file: file };
            uploadedFiles.push(fileObj);
            updateFileListUI();
            this.value = "";
          }
        });
      }
      function updateFileListUI() {
        fileList.innerHTML = "";
        uploadedFiles.forEach(function (fileObj) {
          const fileItem = document.createElement("div");
          fileItem.className = "file-item";
          const fileName = document.createElement("div");
          fileName.className = "file-item-name";
          fileName.textContent = fileObj.name;
          const deleteButton = document.createElement("button");
          deleteButton.className = "file-delete";
          deleteButton.textContent = "×";
          deleteButton.setAttribute("data-id", fileObj.id);
          deleteButton.addEventListener("click", function () {
            deleteFile(fileObj.id);
          });
          fileItem.appendChild(fileName);
          fileItem.appendChild(deleteButton);
          fileList.appendChild(fileItem);
        });
        if (uploadedFiles.length >= MAX_FILES) {
          fileInput.disabled = true;
          document.querySelector(".file-btn").style.opacity = "0.5";
        } else {
          fileInput.disabled = false;
          document.querySelector(".file-btn").style.opacity = "1";
        }
      }
      function deleteFile(fileId) {
        const index = uploadedFiles.findIndex(file => file.id == fileId);
        if (index !== -1) {
          uploadedFiles.splice(index, 1);
          updateFileListUI();
        }
      }

      // Page navigation
      if (nextButton) {
        nextButton.addEventListener("click", function () {
          if (validatePage(page1)) {
            page1.style.display = "none";
            page2.style.display = "block";
            step1.classList.remove("active");
            step1.classList.add("completed");
            step2.classList.add("active");
            progressFill.style.width = "100%";
            setupPage2Validation();
            window.scrollTo(0, 0);
          } else {
            alert("Please fill in all required fields before proceeding.");
          }
        });
      }
      if (backButton) {
        backButton.addEventListener("click", function () {
          page2.style.display = "none";
          page1.style.display = "block";
          step2.classList.remove("active");
          step1.classList.remove("completed");
          step1.classList.add("active");
          progressFill.style.width = "0%";
          window.scrollTo(0, 0);
        });
      }

      function checkPage2Fields() {
        const requiredInputs = page2.querySelectorAll("input[required], select[required], textarea[required]");
        let allValid = true;
        requiredInputs.forEach(function (input) {
          if (input.type === "checkbox" && !input.checked) {
            allValid = false;
          } else if (input.type === "radio") {
            const name = input.name;
            const radioGroup = page2.querySelectorAll('input[type="radio"][name="' + name + '"]');
            let anyChecked = false;
            radioGroup.forEach(function (radio) { if (radio.checked) anyChecked = true; });
            if (!anyChecked) allValid = false;
          } else if (!input.value || input.value.trim() === "") {
            allValid = false;
          }
        });
        return allValid;
      }
      function updateSubmitButtonState() {
        if (submitButton) {
          submitButton.disabled = !checkPage2Fields();
        }
      }
      function setupPage2Validation() {
        const allInputs = page2.querySelectorAll("input, select, textarea");
        allInputs.forEach(function (input) {
          input.addEventListener("change", updateSubmitButtonState);
          input.addEventListener("input", updateSubmitButtonState);
          input.addEventListener("blur", updateSubmitButtonState);
        });
        updateSubmitButtonState();
      }
      function setupErrorClearingBehavior() {
        const allFormElements = document.querySelectorAll("input, select, textarea");
        allFormElements.forEach(function (element) {
          if (element.type !== "checkbox" && element.type !== "radio") {
            element.addEventListener("input", function () { removeError(this); });
          }
          element.addEventListener("change", function () {
            removeError(this);
            if (element.type === "radio") {
              const radioButtons = document.querySelectorAll('input[type="radio"][name="' + element.name + '"]');
              radioButtons.forEach(function (radio) { removeError(radio); });
            }
          });
        });
      }
      setupErrorClearingBehavior();

      // Combined submit handler: update IDs, validate page 2, check captcha, and submit
      if (applicationForm) {
        applicationForm.addEventListener("submit", function (e) {
          // Store nickname in sessionStorage for later verification
          const nickname = document.getElementById("nickname").value;
          if (nickname) {
            sessionStorage.setItem("applicationNickname", nickname);
            sessionStorage.setItem("applicationId", applicationId);
            console.log("Storing nickname in sessionStorage:", nickname);
          }

          if (!validatePage(page2)) {
            e.preventDefault();
            alert("Please fill in all required fields before submitting.");
            const firstErrorField = page2.querySelector(".error");
            if (firstErrorField) {
              firstErrorField.scrollIntoView({ behavior: "smooth", block: "center" });
            }
            return false;
          }

          const captchaResponse = document.querySelector('[name="g-recaptcha-response"]');
          if (!captchaResponse || captchaResponse.value.trim() === "") {
            e.preventDefault();
            alert("Please complete the captcha.");
            return false;
          }

          // Let Netlify handle the form submission - don't preventDefault
          console.log("Form submission validated and proceeding");
          return true;
        });
      }

      function validatePage(page) {
        let isValid = true;
        const requiredElements = page.querySelectorAll("input[required], select[required], textarea[required]");
        requiredElements.forEach(function (element) {
          if (!validateElement(element)) { isValid = false; }
        });
        if (page === page1) {
          const serviceCheckboxes = page.querySelectorAll('input[name="services"]');
          let serviceChecked = false;
          serviceCheckboxes.forEach(function (checkbox) {
            if (checkbox.checked) serviceChecked = true;
          });
          if (!serviceChecked && serviceCheckboxes.length > 0) {
            isValid = false;
            highlightError(serviceCheckboxes[0].closest(".form-group"), "Please select at least one service");
          }
          const platformCheckboxes = page.querySelectorAll('input[name="platforms"]');
          let platformChecked = false;
          platformCheckboxes.forEach(function (checkbox) {
            if (checkbox.checked) platformChecked = true;
          });
          if (!platformChecked && platformCheckboxes.length > 0) {
            isValid = false;
            highlightError(platformCheckboxes[0].closest(".form-group"), "Please select at least one platform");
          }
        }
        return isValid;
      }
      function validateElement(element) {
        if (element.offsetParent === null && !element.classList.contains("checkbox-input")) {
          return true;
        }
        let isValid = true;
        if (element.type === "checkbox") {
          if (element.required && !element.checked) {
            isValid = false;
          }
        } else if (element.type === "radio") {
          const radioGroup = document.querySelectorAll('input[type="radio"][name="' + element.name + '"]');
          let radioChecked = false;
          radioGroup.forEach(function (radio) {
            if (radio.checked) radioChecked = true;
          });
          if (!radioChecked) {
            isValid = false;
          }
        } else if (element.tagName === "SELECT") {
          if (!element.value) {
            isValid = false;
          }
        } else {
          if (!element.value.trim()) {
            isValid = false;
          }
          if (element.type === "email" && element.value) {
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(element.value)) {
              isValid = false;
              highlightError(element, "Please enter a valid email address");
              return isValid;
            }
          }
          // Validate Bungie ID format (must include the # character)
          if (element.id === "nickname" && element.value) {
            if (!element.value.includes('#')) {
              isValid = false;
              highlightError(element, "Bungie ID must include the # character (e.g., Username#1234)");
              return isValid;
            }
          }
        }
        if (!isValid) {
          highlightError(element);
        } else {
          removeError(element);
        }
        return isValid;
      }
      function highlightError(element, message) {
        const formGroup = element.closest(".form-group");
        if (formGroup) {
          formGroup.classList.add("error-group");
          let errorMsg = formGroup.querySelector(".error-message");
          if (!errorMsg) {
            errorMsg = document.createElement("div");
            errorMsg.className = "error-message";
            formGroup.appendChild(errorMsg);
          }
          errorMsg.textContent = message || "This field is required";
          errorMsg.style.display = "block";
        }
        const checkboxOption = element.closest(".checkbox-option");
        if (checkboxOption) {
          checkboxOption.classList.add("error");
        }
        element.classList.add("error");
      }
      function removeError(element) {
        const formGroup = element.closest(".form-group");
        if (formGroup) {
          formGroup.classList.remove("error-group");
          const errorMsg = formGroup.querySelector(".error-message");
          if (errorMsg) {
            errorMsg.style.display = "none";
          }
        }
        element.classList.remove("error");
      }
    });
  </script>
</body>
</html>
