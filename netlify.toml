[build]
  publish = "."
  command = "npm run build"

# Allow thank-you.html to be accessed directly
[[redirects]]
  from = "/thank-you.html"
  to = "/thank-you.html"
  status = 200

# Redirect all other paths to index.html
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  force = false
  
# Redirect for form submission handling
[[redirects]]
  from = "/submit-form"
  to = "/.netlify/functions/submit-form"
  status = 200
  force = true

# Handle Bungie callback
[[redirects]]
  from = "/callback"
  to = "/.netlify/functions/callback"
  status = 200
  force = true

# Handle form data processing
[functions]
  directory = "functions"